<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <script crossorigin src="https://unpkg.com/react@18/umd/react.development.js"></script>
  <script crossorigin src="https://unpkg.com/react-dom@18/umd/react-dom.development.js"></script>
  <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
  <title>useState</title>
</head>
<body>

<!--
1. React.useState()
  1) í•¨ìˆ˜í˜• ì»´í¬ë„ŒíŠ¸ì—ì„œ ìƒíƒœ(state)ë¥¼ ì„ ì–¸í•˜ê³  ê´€ë¦¬í•˜ê¸° ìœ„í•œ í›…(Hooks) ì…ë‹ˆë‹¤. 
    (ì—¬ê¸°ì„œ ìƒíƒœë€ ì»´í¬ë„ŒíŠ¸ê°€ ë Œë”ë§ë˜ëŠ” ë™ì•ˆ ê°’ì´ ë³€í•  ìˆ˜ ìˆëŠ” ë°ì´í„°ë¥¼ ì˜ë¯¸í•©ë‹ˆë‹¤.)
  2) useStateëŠ” ë°°ì—´ì„ ë°˜í™˜í•˜ë©°, ë°˜í™˜í•˜ëŠ” ë°°ì—´ì˜ ì²« ë²ˆì§¸ ìš”ì†ŒëŠ” í˜„ì¬ ìƒíƒœ ê°’, ë‘ ë²ˆì§¸ ìš”ì†ŒëŠ” ìƒíƒœ ê°’ì„ ë³€ê²½í•˜ëŠ” í•¨ìˆ˜ì…ë‹ˆë‹¤.
  3) ë¦¬ì•¡íŠ¸ì—ì„œëŠ” ì•ìœ¼ë¡œ ì£¼ìš” ê°œë°œ ë°©ì‹ìœ¼ë¡œ useState() í•¨ìˆ˜ë¥¼ ì‚¬ìš©í•  ê²ƒì´ë¼ê³  ë°œí‘œí–ˆìŠµë‹ˆë‹¤.


2. React.useState() êµ¬ë¬¸
  1) í˜•ì‹
    const [state, setState] = React.useState(initialState)
         state ì´ë¦„                             ì´ˆê¸°ê°’
  2) ì„¤ëª…
    (1) state
      - ìƒíƒœ ë³€ìˆ˜ì˜ ì´ë¦„ì…ë‹ˆë‹¤.
      - ëª¨ë“  íƒ€ì…ì˜ ê°’ì„ ê°€ì§ˆ ìˆ˜ ìˆìŠµë‹ˆë‹¤.
      - stateê°€ ë³€í•˜ë©´ ë¦¬ë Œë”ë§ë©ë‹ˆë‹¤.
    (2) setState
      - ìƒíƒœ ë³€ìˆ˜ ê°’ì„ ë³€ê²½í•˜ëŠ” ìƒíƒœ ì—…ë°ì´íŠ¸ í•¨ìˆ˜ì…ë‹ˆë‹¤.
    (3) initialState
      - ìƒíƒœ ë³€ìˆ˜ì˜ ì´ˆê¹ƒê°’ì…ë‹ˆë‹¤.


3. Reactì˜ ìƒíƒœ ì—…ë°ì´íŠ¸ í•¨ìˆ˜ì˜ ë‘ ê°€ì§€ ë°©ì‹
  1) ê°’ì„ ì§ì ‘ ì „ë‹¬í•˜ëŠ” ë°©ì‹
  2) í•¨ìˆ˜(ì´ì „ ìƒíƒœ ê°’ì„ ë°›ì•„ ìƒˆë¡œìš´ ìƒíƒœ ê°’ì„ ë°˜í™˜í•˜ëŠ” í•¨ìˆ˜)ë¥¼ ì „ë‹¬í•˜ëŠ” ë°©ì‹ (í•¨ìˆ˜í˜• ì—…ë°ì´íŠ¸)
-->

<div id="root1"></div>
<script type="text/babel">

  const Spin1 = () => {

    // state = { number: 0 }
    // number ë³€ê²½ í•¨ìˆ˜: setNumber
    const [number, setNumber] = React.useState(0);

    // ì¦ê°€ìš© ì´ë²¤íŠ¸ í•¸ë“¤ëŸ¬
    const increaseHandler = (e) => {
      // number = number + 1;  //-- ì‚¬ìš©í•  ìˆ˜ ì—†ëŠ” í‘œí˜„ì‹ XXXXXX
      setNumber(number + 10);  //--- ë°˜ë“œì‹œ ìƒíƒœ ì—…ë°ì´íŠ¸ í•¨ìˆ˜ë¥¼ ì‚¬ìš©í•´ì•¼ë§Œ í•©ë‹ˆë‹¤.
    }

    // ê°ì†Œìš© ì´ë²¤íŠ¸ í•¸ë“¤ëŸ¬
    const decreaseHandler = (e) => {
      setNumber(number - 10);
    }

    return(
      <>
        <h1>{number}</h1>
        <button onClick={increaseHandler}>ğŸ¤©</button>
        <button onClick={decreaseHandler}>â›ˆï¸</button>
      </>
    )

  }
  ReactDOM.createRoot(document.getElementById('root1')).render(<Spin1/>)

</script>

<hr>

<div id="root2"></div>
<script type="text/babel">

  const Spin2 = () => {

    const [number, setNumber] = React.useState(0);

    const increaseHandler = () => {
      //----- í•¨ìˆ˜í˜• ì—…ë°ì´íŠ¸
      // í˜„ì¬ stateë¥¼ ì „ë‹¬í•˜ê³ , ìƒˆë¡œìš´ stateë¥¼ ë°˜í™˜í•˜ëŠ” ì½œë°± í•¨ìˆ˜ë¥¼ ì‚¬ìš©í•˜ëŠ” ë°©ì‹ì…ë‹ˆë‹¤.
      setNumber(prevNumber => prevNumber + 1);
    }

    const decreaseHandler = () => {
      setNumber(prevNumber => prevNumber - 1);
    }

    return (
      <>
        <h1>{number}</h1>
        <button onClick={increaseHandler}>(âÂ´â—¡`â)</button>
        <button onClick={decreaseHandler}>â˜†*: .ï½¡. o(â‰§â–½â‰¦)o .ï½¡.:*â˜†</button>
      </>
    )
  }
  ReactDOM.createRoot(document.getElementById('root2')).render(<Spin2/>);

</script>

<hr>

<div id="root3"></div>
<script type="text/babel">

  //----- ì…ë ¥ ìƒìì™€ state

  const InputComponent = () => {

    const [value, setValue] = React.useState('');

    // ì…ë ¥ ìƒìì— ì…ë ¥í•œ ë‚´ìš©ì´ ë³€í•˜ë©´ ë°œìƒí•˜ëŠ” ì´ë²¤íŠ¸: onChange
    const handleChange = (e) => {
      setValue(e.target.value);
      console.log(e.target.value);
    }

    return (
      <>
        <input
          type='text'
          value={value}
          onChange={handleChange}
          maxLength={10}
          placeholder='ê°’ì„ ì…ë ¥í•˜ì„¸ìš”'
          autoFocus
        />
        <h1>{value}</h1>
      </>
    )
  }
  ReactDOM.createRoot(document.getElementById('root3')).render(<InputComponent/>);

</script>

<hr>

<div id="root4"></div>
<script type="text/babel">

  const CheckboxComponent = () => {

    const [asdf, setAsdf] = React.useState(false);
    // ì²´í¬ ìƒíƒœê°€ ë³€í• ë•Œë§ˆë‹¤ ë°œìƒí•˜ëŠ” ì´ë²¤íŠ¸: onChange
    const handleChange = (e) => {
      console.log(e.target.checked);
      setAsdf(e.target.checked);
    }

    return (
      <>
        <input
          type='checkbox'
          id='chk'
          onChange={handleChange}
          checked={asdf}
        />
        <label htmlFor='chk'>ì²´í¬ë°•ìŠ¤</label>
        {/* boolean ê°’ì€ í‘œí˜„ì‹ìœ¼ë¡œ í™”ë©´ì— í‘œì‹œí•  ìˆ˜ ì—†ìŠµë‹ˆë‹¤. ë¬¸ìì—´ë¡œ ë°”ê¿”ì„œ í‘œì‹œí•©ë‹ˆë‹¤. */}
        <h1>{asdf ? 'ì²´í¬ë¨' : 'ì²´í¬ë˜ì§€ì•ŠìŒ'}</h1>
      </>
    )
  }
  ReactDOM.createRoot(document.getElementById('root4')).render(<CheckboxComponent />);

</script>

<hr>

<div id="root5"></div>
<script type="text/babel">

  //----- select íƒœê·¸ì™€ state

  // select íƒœê·¸ì— skt, kt, lgu+ ë“±ë¡í•˜ê³  ì„ íƒí•œ í†µì‹ ì‚¬ë¥¼ stateì— ì €ì¥í•˜ê³  í™”ë©´ì— í‘œì‹œí•˜ê¸°

  const SelectComponent = () => {

    const [selectedValue, setSelectedValue] = React.useState('');

    const handleChange = (e) => {
      console.log(e.target);
      setSelectedValue(e.target.value);
    }


    return (
      <>
        <select value={selectedValue} onChange={handleChange}>
          <option disabled value=''>í†µì‹ ì‚¬ë¥¼ ì„ íƒí•´ì£¼ì„¸ìš”.</option>
          <option>skt</option>
          <option>kt</option>
          <option>lgu+</option>
        </select>
        <h1>ì„ íƒí•œ í†µì‹ ì‚¬: {selectedValue}</h1>
      </>
    )

  }

  ReactDOM.createRoot(document.getElementById('root5')).render(<SelectComponent />);

</script>

<hr>

<div id="root6"></div>
<script type="text/babel">

  //----- ë¡œê·¸ì¸ í™”ë©´ê³¼ state (state 2ê°œ ì‚¬ìš©)

  const LoginComponent = () => {

    // state 2ê°œ
    const [id, setId] = React.useState('');
    const [pw, setPw] = React.useState('');

    // submit ì´ë²¤íŠ¸ í•¸ë“¤ëŸ¬
    const handleSubmit = (e) => {
      if(id === '' | pw === '') {
        alert('ì•„ì´ë””ì™€ ë¹„ë°€ë²ˆí˜¸ ì…ë ¥ì„ í™•ì¸í•˜ì„¸ìš”.');
        e.preventDefault();  //-- ì„œë¸Œë°‹ì„ ë§‰ìŠµë‹ˆë‹¤.
        return;  //-------------- ì´ë²¤íŠ¸ í•¸ë“¤ëŸ¬ì˜ ì‹¤í–‰ì„ ë§‰ìŠµë‹ˆë‹¤.
      }
      alert(`id: ${id}, pw: ${pw}`);
    }

    return (
      <form
        onSubmit={handleSubmit}
      >
        <input
          type='text'
          value={id}
          placeholder='ì•„ì´ë””'
          onChange={e => setId(e.target.value)}
        />
        <br/>
        <input
          type='password'
          value={pw}
          placeholder='ë¹„ë°€ë²ˆí˜¸'
          onChange={e => setPw(e.target.value)}
          maxLength={50}
        />
        <br/>
        <button type='submit'>ë¡œê·¸ì¸</button>
      </form>
    )
  }

  ReactDOM.createRoot(document.getElementById('root6')).render(<LoginComponent />);

</script>

<hr>

<div id="root7"></div>
<script type="text/babel">

  //----- ë¡œê·¸ì¸ í™”ë©´ê³¼ state (state 1ê°œ)

  const LoginComponent2 = () => {

    // state (idì™€ pwë¥¼ ê°€ì§„ user ê°ì²´)
    const [user, setUser] = React.useState({
      id: '',
      pw: '',
    });

    // ì…ë ¥ ìƒì(ì•„ì´ë””, ë¹„ë°€ë²ˆí˜¸)ì˜ ë³€ê²½ ì´ë²¤íŠ¸ í•¸ë“¤ëŸ¬
    const handleChange = (e) => {
      // console.log(e.target);  ì…ë ¥í•˜ê³  ìˆëŠ” ì…ë ¥ ìƒì í™•ì¸
      // console.log(e.target.id, e.target.value);  ì…ë ¥í•˜ê³  ìˆëŠ” ì…ë ¥ ìƒìì˜ idì™€ ì…ë ¥ê°’
      setUser({
        ...user,  //---------------------- ê¸°ì¡´ user ê°ì²´ê°€ ê°€ì§„ ê°’ì„ ê·¸ëŒ€ë¡œ ì‚¬ìš©í•©ë‹ˆë‹¤.
        [e.target.id]: e.target.value,  //-- ì…ë ¥í•˜ê³  ìˆëŠ” ì…ë ¥ ìƒì(id, pw)ì˜ ì…ë ¥ê°’ì„ ë®ì–´ì“°ê¸° í•©ë‹ˆë‹¤.
                                        //-- ëŒ€ê´„í˜¸[]ëŠ” í”„ë¡œí¼í‹°ë¥¼ ë³€ìˆ˜ë‚˜ í‘œí˜„ì‹ì˜ ê°’ìœ¼ë¡œ ë™ì ìœ¼ë¡œ ì§€ì •í•˜ëŠ” ê²½ìš°ì— ë°˜ë“œì‹œ í•„ìš”í•œ ES6 ë¬¸ë²•ì…ë‹ˆë‹¤.
      })
    }
    
    // ì„œë¸Œë°‹ ì´ë²¤íŠ¸ í•¸ë“¤ëŸ¬
    const handleSubmit = (e) => {
      if(user.id === '' || user.pw === '') {
        alert('ì•„ì´ë””ì™€ ë¹„ë°€ë²ˆí˜¸ ì…ë ¥ì„ í™•ì¸í•˜ì„¸ìš”.');
        e.preventDefault();
        return;
      }
      alert(`id: ${user.id}, pw: ${user.pw}`);
    }

    return (
      <form
        action='/login'
        method='post'
        onSubmit={handleSubmit}
      >
        <input
          type='text'
          id='id'  //----- idê°’ì€ state user ê°ì²´ì˜ id í”„ë¡œí¼í‹° ì´ë¦„ê³¼ ë™ì¼í•˜ê²Œ ë§ì¶¥ë‹ˆë‹¤.
          value={user.id}
          onChange={handleChange}
          placeholder='ì•„ì´ë””'
        />
        <br/>
        <input
          type='password'
          id='pw'  //----- idê°’ì€ state user ê°ì²´ì˜ pw í”„ë¡œí¼í‹° ì´ë¦„ê³¼ ë™ì¼í•˜ê²Œ ë§ì¶¥ë‹ˆë‹¤.
          value={user.pw}
          onChange={handleChange}
          placeholder='ë¹„ë°€ë²ˆí˜¸'
        />
        <br/>
        <button type='submit'>ë¡œê·¸ì¸</button>
      </form>
    )

  }

  ReactDOM.createRoot(document.getElementById('root7')).render(<LoginComponent2 />);

</script>

<hr>

<div id="root8"></div>
<script type="text/babel">

  const AnimalComponent = () => {

    // state
    const [inputValue, setInputValue] = React.useState('');
    const [animals, setAnimals] = React.useState([]);

    // ì…ë ¥ ìƒì ì…ë ¥ ì´ë²¤íŠ¸
    const handleChange = e => {
      setInputValue(e.target.value);
      
    }

    // ì¶”ê°€ ë“±ë¡ ì´ë²¤íŠ¸
    const handleClick = e => {
      if(inputValue === '') {
        alert('ë™ë¬¼ ì´ë¦„ì„ ì…ë ¥í•˜ì„¸ìš”.');
        return;
      }
      // inputValueë¥¼ animals ë°°ì—´ì— ë„£ê¸°
      setAnimals([
        ...animals,  //-- ê¸°ì¡´ animals ë°°ì—´ ìš”ì†Œ ì „ë¶€ (ìŠ¤í”„ë ˆë“œ ì—°ì‚° ... í™œìš©)
        inputValue,  //-- ìƒˆë¡œ ì…ë ¥í•œ inputValue
      ]);  // ê¸°ì¡´ animals ë°°ì—´ ìš”ì†Œ ì „ë¶€ + ìƒˆë¡œ ì…ë ¥í•œ inputValue
      //  ì…ë ¥ ìƒì ì´ˆê¸°í™”í•˜ê¸°
      setInputValue('');
    }

    // ì‚­ì œ ì´ë²¤íŠ¸
    const handleDelete = index => {
      setAnimals(animals.filter((_, i) => i !== index));
    };

    return (
      <>
        <input
          type='text'
          value={inputValue}
          onChange={handleChange}
          placeholder='ë™ë¬¼ ì…ë ¥'
        />
        <button
          type='button'
          onClick={handleClick}
        >ì¶”ê°€</button>
        <ul>
          {
            animals.map( (animal, index) => <li key={index}>{animal} <button onClick={() => handleDelete(index)}>ì‚­ì œ</button></li> )
          }
        </ul>
      </>
    )
  }

  ReactDOM.createRoot(document.getElementById('root8')).render(<AnimalComponent />);

</script>


</body>
</html>