<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <script crossorigin src="https://unpkg.com/react@18/umd/react.development.js"></script>
  <script crossorigin src="https://unpkg.com/react-dom@18/umd/react-dom.development.js"></script>
  <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
  <title>state</title>
</head>
<body>

<!--
1. state (ìƒíƒœ)
  1) stateëŠ” ì»´í¬ë„ŒíŠ¸ ë‚´ë¶€ì—ì„œ ê´€ë¦¬ë˜ëŠ” ë™ì ì¸ ë°ì´í„°ë¥¼ ì˜ë¯¸í•©ë‹ˆë‹¤.
  2) ì»´í¬ë„ŒíŠ¸ì˜ stateëŠ” ì‹œê°„ì´ ì§€ë‚¨ì— ë”°ë¼, ë˜ëŠ” ì‚¬ìš©ìì™€ì˜ ìƒí˜¸ì‘ìš©ì— ë”°ë¼ ë³€ê²½ë  ìˆ˜ ìˆìœ¼ë©°, stateê°€ ë³€ê²½ë˜ë©´ í•´ë‹¹ ì»´í¬ë„ŒíŠ¸ì™€ ê·¸ ìì‹ ì»´í¬ë„ŒíŠ¸ê°€ ìë™ìœ¼ë¡œ ë‹¤ì‹œ ë Œë”ë§ë©ë‹ˆë‹¤.
  3) í´ë˜ìŠ¤í˜• ì»´í¬ë„ŒíŠ¸ëŠ” stateë¥¼ ì§ì ‘ ì‚¬ìš©í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.
  4) í•¨ìˆ˜í˜• ì»´í¬ë„ŒíŠ¸ëŠ” v16.8 ì´í›„ React.useState() í›…(Hooks)ì„ ì´ìš©í•´ì„œ stateë¥¼ ì‚¬ìš©í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.
    (í•¨ìˆ˜í˜• ì»´í¬ë„ŒíŠ¸ì˜ ë‚´ìš©ì€ ì—¬ê¸°ì„œëŠ” ë‹¤ë£¨ì§€ ì•ŠìŠµë‹ˆë‹¤. ë³„ë„ë¡œ ë‹¤ë£¨ê²Œ ë©ë‹ˆë‹¤.)


2. state ì„ ì–¸ ë° ì´ˆê¸°í™”
  1) í´ë˜ìŠ¤í˜• ì»´í¬ë„ŒíŠ¸ì—ì„œëŠ” stateë¥¼ ê°ì²´ í˜•íƒœë¡œ ì„ ì–¸í•©ë‹ˆë‹¤. stateì— ì €ì¥í•˜ëŠ” ê°’ì€ ê°ì²´ ë¦¬í„°ëŸ´ í˜•ì‹ {}ì„ ê°–ì¶°ì•¼ í•©ë‹ˆë‹¤.
  2) ë³´í†µ ìƒì„±ì(constructor)ì—ì„œ this.stateë¡œ ì´ˆê¸°í™”í•©ë‹ˆë‹¤.
  3) ES6 ë¬¸ë²•ì„ ì‚¬ìš©í•˜ë©´ ìƒì„±ì ì—†ì´ í´ë˜ìŠ¤ í•„ë“œë¡œ ë°”ë¡œ ì„ ì–¸í•  ìˆ˜ë„ ìˆìŠµë‹ˆë‹¤.


3. state ê°’ ë³€ê²½
  1) stateì˜ ê°’ì„ ì§ì ‘ ë³€ê²½í•˜ì§€ ì•Šê³ , ë°˜ë“œì‹œ this.setState() ë©”ì†Œë“œë¥¼ ì‚¬ìš©í•´ì•¼ í•©ë‹ˆë‹¤.
    (this.stateë¥¼ ì§ì ‘ ë³€ê²½í•˜ë©´ ë Œë”ë§ì´ ì¼ì–´ë‚˜ì§€ ì•ŠìŠµë‹ˆë‹¤.)
  2) setState()
    (1) setState() ë©”ì†Œë“œë¥¼ í˜¸ì¶œí•˜ë©´ ë¦¬ì•¡íŠ¸ê°€ ë³€ê²½ì„ ê°ì§€í•˜ê³  ì»´í¬ë„ŒíŠ¸ë¥¼ ë¦¬ë Œë”ë§í•©ë‹ˆë‹¤.
    (2) setState() ë©”ì†Œë“œëŠ” ë¹„ë™ê¸° ë°©ì‹ìœ¼ë¡œ ë°±ê·¸ë¼ìš´ë“œì—ì„œ ë™ì‘í•©ë‹ˆë‹¤.
    (3) setState() ë©”ì†Œë“œëŠ” ë¹„ë™ê¸° ë°©ì‹ì´ë¯€ë¡œ í•˜ë‚˜ì˜ ì´ë²¤íŠ¸ì—ì„œ setState() ë©”ì†Œë“œë¥¼ ì—¬ëŸ¬ ë²ˆ í˜¸ì¶œí•˜ë”ë¼ë„ state ê°’ì´ ìˆœì°¨ì ìœ¼ë¡œ ì‚¬ìš©ë˜ì§€ ì•ŠìŠµë‹ˆë‹¤.
    (4) ì˜ˆì‹œ
      this.setState({
        count: this.state.count + 1
      });
  3) prevState
    (1) setState()ëŠ” ë¹„ë™ê¸°ì ìœ¼ë¡œ ë™ì‘í•˜ë¯€ë¡œ ì´ì „ ê°’ì„ ê¸°ë°˜ìœ¼ë¡œ ë³€ê²½í•  ë•ŒëŠ” í•¨ìˆ˜í˜• ì—…ë°ì´íŠ¸ë¥¼ ì‚¬ìš©í•©ë‹ˆë‹¤. (ì½œë°± ì‚¬ìš©)
    (2) ì½œë°± í•¨ìˆ˜ì˜ ì²« ë²ˆì§¸ ì¸ìëŠ” ì´ì „ stateì˜ ê°’ì„ ê°€ì§€ê³  ìˆëŠ” prevStateë¥¼ ì‚¬ìš©í•©ë‹ˆë‹¤.
    (3) ì½œë°± í•¨ìˆ˜ì˜ ë‘ ë²ˆì§¸ ì¸ìëŠ” props ê°ì²´ë¥¼ ì‚¬ìš©í•©ë‹ˆë‹¤. (ì‚¬ìš©í•˜ì§€ ì•ŠëŠ”ë‹¤ë©´ propsëŠ” ìƒëµ ê°€ëŠ¥í•©ë‹ˆë‹¤.)
    (4) ì½œë°± í•¨ìˆ˜ëŠ” ìµœì¢…ì ìœ¼ë¡œ stateë¥¼ ê°ì²´ ë¦¬í„°ëŸ´ {} í˜•íƒœë¡œ ë°˜í™˜í•©ë‹ˆë‹¤.
    (5) ì˜ˆì‹œ
      this.setState((prevState) => ({
        count: prevState.count + 1
      }));


4. í´ë˜ìŠ¤í˜• ì»´í¬ë„ŒíŠ¸ì™€ state ì˜ˆì‹œ
  class Counter extends React.Component {
    // ìƒì„±ìì—ì„œ ì´ˆê¸°í™”
    constructor(props) {
      super(props);
      this.state = {
        count: 0
      };
    }
    // ë˜ëŠ” í´ë˜ìŠ¤ í•„ë“œë¡œ ì„ ì–¸
    state = {
      count: 0
    };
    render() {
      return <div>{this.state.count}</div>;
    }
  }
-->

<div id="root1"></div>
<script type="text/babel">

  class Spin1 extends React.Component {

    //----- state ì„ ì–¸ ë° ì´ˆê¸°í™”
    state = {
      number: 0,
    }
    //----- ì¦ê°€ìš© ì´ë²¤íŠ¸ í•¸ë“¤ëŸ¬
    increaseHandler = () => {
      this.setState({
        number: this.state.number + 1
      })
    }

    //----- ê°ì†Œìš© ì´ë²¤íŠ¸ í•¸ë“¤ëŸ¬
    decreaseHandler = () => {
      this.setState({
        number: this.state.number -2
      })
    }


    //----- rendering
    render() {
      return (
        <>
          <h1>{this.state.number}</h1> {/*thisëŠ” Spin1ì„ ì˜ë¯¸*/}
          <button onClick={this.increaseHandler}>ğŸ‘</button>
          <button onClick={this.decreaseHandler}>ğŸ‘ğŸ‘</button>
        </>
      )
    }

  }

  ReactDOM.createRoot(document.getElementById('root1')).render(<Spin1 />)

</script>

<hr>

<div id="root2"></div>
<script type="text/babel">

  class Spin2 extends React.Component {

    //----- ìƒì„±ìë¥¼ ì´ìš©í•œ state ì„ ì–¸ ë° ì´ˆê¸°í™”
    constructor(props) {
      super(props);
      this.state = {
        number: 0
      }
    }

    //----- ì¦ê°€ìš© ì´ë²¤íŠ¸ í•¸ë“¤ëŸ¬
    increaseHandler = () => {
      this.setState((prevState) => {
        return {
          number: prevState.number + 1
        }
      })
    }


    //----- ê°ì†Œìš© ì´ë²¤íŠ¸ í•¸ë“¤ëŸ¬
    decreaseHandler = () => {
      this.setState((prevState) => {
        return {
          number: prevState.number - 1
        }
      })
    }

    //----- rendering
    render() {
      const { number } = this.state;
      const textColor = number === 0 ? 'black' : number > 0 ? 'red' : 'blue';
      return (
        <>
          <h1 style={{ color: textColor }}>{number}</h1> 
          <button onClick={this.increaseHandler}>ğŸ‘</button>
          <button onClick={this.decreaseHandler}>ğŸ‘</button>
        </>
      )
    }
    

  }
  ReactDOM.createRoot(document.getElementById('root2')).render(<Spin2 />)

</script>

</body>
</html>